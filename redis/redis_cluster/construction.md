# Redis Cluster 

## 架构
- 多主节点 + 每主节点 0~N 个从节点
- 从节点：备份数据 + 主节点宕机顶上
- 主节点负责存储数据和分片
- 客户端直接定位主节点

示意：

Master1 —— Slave1-1

Master1 —— Slave1-2

Master2 —— Slave2-1

Master3 —— Slave3-1


## 哈希槽
- 共 **16384 个槽**
- 槽分配给主节点（平均/按比例）
- key → CRC16 → 槽号：
  slot = CRC16(key) % 16384

示例：

| 节点     | 槽范围       |
|----------|--------------|
| Master1  | 0–5460       |
| Master2  | 5461–10922   |
| Master3  | 10923–16383  |

## 客户端定位
- Redis Cluster **无中心架构**，每节点存槽表
- 客户端拿表 → 直接访问目标主节点
- 访问错节点 → 返回 `MOVED` → 客户端更新映射

## 主从数据
- 主节点 = 该槽所有 key
- 从节点 = 主节点备份
- 示例：

## 哈希槽作用
1. **扩容/迁移** → 槽可重分配，无停机
2. **天然分片** → 避免单机瓶颈
3. **高可用** → 主宕机 → 从顶上，槽不丢

## 核心一句话
**Redis Cluster = 多主分片 + 客户端定位 key，从节点备份高可用**

